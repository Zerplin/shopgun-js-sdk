{"version":3,"file":"sgn-sdk.cjs.js","sources":["../lib/coffeescript/util.coffee","../lib/coffeescript/config.coffee","../lib/coffeescript/translations.coffee","../lib/coffeescript/core.coffee","../lib/coffeescript/sgn.coffee","../lib/coffeescript/storage/client-local.coffee","../lib/coffeescript/storage/client-session.coffee","../lib/coffeescript/storage/client-cookie.coffee","../lib/coffeescript/kits/assets/file-upload.coffee","../lib/coffeescript/kits/assets/index.coffee","../lib/coffeescript/kits/events/tracker.coffee","../lib/coffeescript/kits/events/pulse.coffee","../lib/coffeescript/kits/events/index.coffee","../lib/coffeescript/kits/graph/request.coffee","../lib/coffeescript/kits/graph/index.coffee","../lib/coffeescript/kits/core/request.coffee","../lib/coffeescript/kits/core/session.coffee","../lib/coffeescript/kits/core/index.coffee","../lib/coffeescript/kits/paged-publication/page-spread.coffee","../lib/coffeescript/kits/paged-publication/page-spreads.coffee","../lib/coffeescript/kits/paged-publication/core.coffee","../lib/coffeescript/kits/paged-publication/hotspots.coffee","../lib/coffeescript/key-codes.coffee","../lib/coffeescript/kits/paged-publication/controls.coffee","../lib/coffeescript/kits/paged-publication/event-tracking.coffee","../lib/coffeescript/kits/paged-publication/viewer.coffee","../lib/coffeescript/kits/paged-publication/bootstrapper.coffee","../lib/coffeescript/kits/paged-publication/index.coffee","../lib/coffeescript/kits/incito-publication/event-tracking.coffee","../lib/coffeescript/kits/incito-publication/viewer.coffee","../lib/coffeescript/kits/incito-publication/controls.coffee","../lib/coffeescript/kits/incito-publication/bootstrapper.coffee","../lib/coffeescript/kits/incito-publication/index.coffee","../vendor/gator.js","../lib/coffeescript/kits/core-ui/offer-details.coffee","../lib/coffeescript/kits/core-ui/popover.coffee","../lib/coffeescript/kits/core-ui/single-choice-popover.coffee","../lib/coffeescript/kits/core-ui/index.coffee","../lib/coffeescript/index.coffee"],"sourcesContent":["util =\n    isBrowser: ->\n        typeof window is 'object' and typeof document is 'object'\n\n    isNode: ->\n        typeof process is 'object'\n\n    error: (err, options) ->\n        err.message = err.message or null\n\n        if typeof options is 'string'\n            err.message = options\n        else if typeof options is 'object' and options?\n            for key, value of options\n                err[key] = value\n\n            err.message = options.message if options.message?\n            err.code = options.code or options.name if options.code? or options.message?\n            err.stack = options.stack if options.stack?\n\n        err.name = options and options.name or err.name or err.code or 'Error'\n        err.time = new Date()\n\n        err\n\n    uuid: ->\n        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n            r = Math.random() * 16 | 0\n            v = if c is 'x' then r else (r & 0x3|0x8)\n\n            v.toString 16\n\n    getQueryParam: (field, url) ->\n        href = if url then url else window.location.href\n        reg = new RegExp '[?&]' + field + '=([^&#]*)', 'i'\n        string = reg.exec href\n\n        if string then string[1] else undefined\n\n    getRandomNumberBetween: (from, to) ->\n        Math.floor(Math.random() * to) + from\n\n    getOS: ->\n        name = null\n        ua = window.navigator.userAgent\n\n        if ua.indexOf('Windows') > -1\n            name = 'Windows'\n        else if ua.indexOf('Mac') > -1\n            name = 'macOS'\n        else if ua.indexOf('X11') > -1\n            name = 'unix'\n        else if ua.indexOf('Linux') > -1\n            name = 'Linux'\n        else if ua.indexOf('iOS') > -1\n            name = 'iOS'\n        else if ua.indexOf('Android') > -1\n            name = 'Android'\n\n        name\n    \n    getDeviceCategory: ->\n        deviceCategory = 'desktop'\n\n        if navigator.platform is 'iPod' or navigator.platform is 'iPhone'\n            deviceCategory = 'mobile'\n        else if navigator.platform is 'iPad'\n            deviceCategory = 'tablet'\n        else if navigator.platform is 'Android' or /android/gi.test(navigator.userAgent)\n            if /tablet/gi.test(navigator.userAgent)\n                deviceCategory = 'tablet'\n            else\n                deviceCategory = 'mobile'\n\n        deviceCategory\n    \n    getPointer: ->\n        pointer = 'fine'\n\n        pointer = 'coarse' if matchMedia('(pointer:coarse)').matches\n\n        pointer\n    \n    getOrientation: (width, height) ->\n        if width is height\n            'quadratic'\n        else if width > height\n            'horizontal'\n        else\n            'vertical'\n\n    getScreenDimensions: ->\n        density = window.devicePixelRatio ? 1\n        logical =\n            width: window.screen.width\n            height: window.screen.height\n        physical =\n            width: Math.round logical.width * density\n            height: Math.round logical.height * density\n\n        density: density\n        logical: logical\n        physical: physical\n\n    getUtcOffsetSeconds: ->\n        now = new Date()\n        jan1 = new Date now.getFullYear(), 0, 1, 0, 0, 0, 0\n        tmp = jan1.toGMTString()\n        jan2 = new Date tmp.substring(0, tmp.lastIndexOf(' ') - 1)\n        stdTimeOffset = (jan1 - jan2) / 1000\n\n        stdTimeOffset\n\n    getUtcDstOffsetSeconds: ->\n        new Date().getTimezoneOffset() * 60 * -1\n\n    getColorBrightness: (color) ->\n        color = color.replace '#', ''\n        hex = parseInt (hex + '').replace(/[^a-f0-9]/gi, ''), 16\n        rgb = []\n        sum = 0\n        x = 0\n\n        while x < 3\n            s = parseInt(color.substring(2 * x, 2), 16)\n            rgb[x] = s\n\n            sum += s if s > 0\n\n            ++x\n\n        if sum <= 381 then 'dark' else 'light'\n\n    btoa: (str) ->\n        if util.isBrowser()\n            btoa str\n        else\n            buffer = null\n\n            if str instanceof Buffer\n                buffer = str\n            else\n                buffer = new Buffer str.toString(), 'binary'\n\n            buffer.toString 'base64'\n\n    chunk: (arr, size) ->\n        results = []\n\n        while arr.length\n            results.push arr.splice(0, size)\n\n        results\n\n    throttle: (fn, threshold = 250, scope) ->\n        last = undefined\n        deferTimer = undefined\n\n        ->\n            context = scope or @\n            now = new Date().getTime()\n            args = arguments\n\n            if last and now < last + threshold\n                clearTimeout deferTimer\n\n                deferTimer = setTimeout ->\n                    last = now\n                    \n                    fn.apply context, args\n                \n                    return\n                , threshold\n            else\n                last = now\n                fn.apply context, args\n\n            return\n\n    loadImage: (src, callback) ->\n        img = new Image()\n\n        img.onload = -> callback null, img.width, img.height\n        img.onerror = -> callback new Error()\n        img.src = src\n\n        img\n\n    distance: (lat1, lng1, lat2, lng2) ->\n        radlat1 = Math.PI * lat1 / 180\n        radlat2 = Math.PI * lat2 / 180\n        theta = lng1 - lng2\n        radtheta = Math.PI * theta / 180\n        dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta)\n        dist = Math.acos(dist)\n        dist = dist * 180 / Math.PI\n        dist = dist * 60 * 1.1515\n        dist = dist * 1.609344 * 1000\n\n        dist\n\n    async:\n        parallel: (asyncCalls, sharedCallback) ->\n            counter = asyncCalls.length\n            allResults = []\n            k = 0\n\n            makeCallback = (index) ->\n                ->\n                    results = []\n                    i = 0\n\n                    counter--\n\n                    while i < arguments.length\n                        results.push arguments[i]\n                        i++\n\n                    allResults[index] = results\n\n                    sharedCallback allResults if counter is 0\n\n                    return\n\n            while k < asyncCalls.length\n                asyncCalls[k] makeCallback(k)\n                k++\n\n            return\n\n    # Method for wrapping a function that takes a callback in any position\n    # to return promises if no callback is given in a call.\n    # The second argument, cbParameterIndex, is the position of the callback in the original functions parameter list.\n    # CoffeeScript optional parameters messes with this function arity detection,\n    # not sure what to do about that, other than always setting cbParameterIndex at callsites.\n    promiseCallbackInterop: (fun, cbParameterIndex = fun.length - 1) ->\n        # This is the function that actually wraps and calls a method to return a promise.\n        makePromise = (fun, cbParameterIndex, parameters) ->\n            new Promise(\n                (resolve, reject) ->\n                    neoCallback = (error, result) ->\n                        if error then reject error else resolve result\n\n                    callParameters = []\n                    for i in [0...((Math.max parameters.length, cbParameterIndex) + 1)]\n                        callParameters.push if i is cbParameterIndex then neoCallback else parameters[i]\n\n                    fun.apply this, callParameters\n            )\n        # Wrapper function that decides what to do per-call.\n        (...parameters) ->\n            if typeof parameters[cbParameterIndex] is 'function'\n                # Callback given, do a regular old call.\n                fun.apply null, parameters\n            else if typeof Promise is 'function'\n                # No callback given, and we have promise support, use makePromise to wrap the call.\n                makePromise fun, cbParameterIndex, parameters\n            else\n                # Ain't got callback, ain't got promise support; we gotta tell the developer.\n                throw new Error(\"\"\"To be able to use this asynchronous method you should:\nSupply a callback function as argument ##{1+cbParameterIndex}.\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given.\n                \"\"\")\n\nmodule.exports = util\n","MicroEvent = require 'microevent'\nConfig = class Config\n    keys: [\n        'appVersion',\n        'appKey',\n        'appSecret',\n        'authToken',\n        'eventTracker',\n        'locale',\n        'coreSessionToken',\n        'coreSessionClientId',\n        'coreUrl',\n        'graphUrl',\n        'eventsTrackUrl',\n        'eventsPulseUrl',\n        'assetsFileUploadUrl'\n    ]\n\n    constructor: ->\n        @attrs = {}\n\n        return\n\n    set: (config = {}) ->\n        changedAttributes = {}\n\n        for key, value of config\n            if key in @keys\n                @attrs[key] = value\n                changedAttributes[key] = value\n\n        @trigger 'change', changedAttributes\n\n        return\n\n    get: (option) ->\n        @attrs[option]\n\nMicroEvent.mixin Config\n\nmodule.exports = Config\n","Mustache = require 'mustache'\npairs =\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?'\n    'incito_publication.product_picker.header': 'Which product?'\n\nmodule.exports =\n    t: (key, view) ->\n        template = pairs[key] ? ''\n\n        Mustache.render template, view\n\n    update: (translations) ->\n        for key, value of translations\n            pairs[key] = value\n\n        return\n","Config = require './config'\ntranslations = require './translations'\nutil = require './util'\nconfig = new Config()\n\n# Set default values.\nconfig.set\n    locale: 'en_US'\n    coreUrl: 'https://api.etilbudsavis.dk'\n    graphUrl: 'https://graph.service.shopgun.com'\n    eventsTrackUrl: 'https://events.service.shopgun.com/sync'\n    eventsPulseUrl: 'wss://events.service.shopgun.com/pulse'\n    assetsFileUploadUrl: 'https://assets.service.shopgun.com/upload'\n\nmodule.exports =\n    config: config\n\n    translations: translations\n\n    util: util","module.exports = require './core'\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.localStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.sessionStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    get: (key) ->\n        return if SGN.util.isNode()\n\n        try\n            name = \"#{prefixKey}#{key}=\"\n            ca = document.cookie.split ';'\n\n            for c in ca\n                ct = c.trim()\n\n                value = ct.substring(name.length, ct.length) if ct.indexOf(name) is 0\n\n            value = JSON.parse value\n        catch err\n            value = {}\n\n        value\n\n    set: (key, value) ->\n        return if SGN.util.isNode()\n\n        try\n            days = 365\n            date = new Date()\n            str = JSON.stringify value\n\n            date.setTime date.getTime() + days * 24 * 60 * 60 * 1000\n\n            document.cookie = \"#{prefixKey}#{key}=#{str};expires=#{date.toUTCString()};path=/\"\n        catch err\n\n        return\n\n\n","SGN = require '../../sgn'\n\nmodule.exports = (options = {}, callback, progressCallback) ->\n    throw new Error('File is not defined') if not options.file?\n\n    url = SGN.config.get 'assetsFileUploadUrl'\n    timeout = 1000 * 60 * 60\n    formData = new FormData()\n    http = new XMLHttpRequest()\n\n    formData.append 'file', options.file\n\n    http.onload = ->\n        if http.status is 200\n            callback null, JSON.parse(http.response)\n        else\n            callback SGN.util.error(new Error('Request error'),\n                code: 'RequestError'\n                statusCode: data.statusCode\n            )\n        \n        return\n    http.upload.onprogress = (e) ->\n        if typeof progressCallback is 'function' and e.lengthComputable\n            progressCallback\n                progress: e.loaded / e.total\n                loaded: e.loaded\n                total: e.total\n        \n        return\n    http.open 'post', url\n    http.timeout = timeout\n    http.setRequestHeader 'Accept', 'application/json'\n    http.send formData\n\n    return","module.exports =\n    fileUpload: require './file-upload'\n","fetch = require 'cross-fetch'\nmd5 = require 'md5'\nSGN = require '../../sgn'\nclientLocalStorage = require '../../storage/client-local'\n\ngetPool = ->\n    data = clientLocalStorage.get 'event-tracker-pool'\n    data = [] if Array.isArray(data) is false\n    data = data.filter (evt) ->\n        typeof evt._i is 'string'\n\n    data\n\npool = getPool()\n\nmodule.exports = class Tracker\n    defaultOptions:\n        trackId: null\n        poolLimit: 1000\n\n    constructor: (options = {}) ->\n        for key, value of @defaultOptions\n            @[key] = options[key] or value\n\n        @location =\n            geohash: null\n            time: null\n            country: null\n        @dispatching = false\n\n        dispatch()\n\n        return\n\n    trackEvent: (type, properties = {}, version = 2) ->\n        throw SGN.util.error(new Error('Event type is required')) if typeof type isnt 'number'\n        return if not @trackId?\n\n        if SGN.config.get('appKey') is @trackId\n            # coffeelint: disable=max_line_length\n            throw SGN.util.error(new Error('Track identifier must not be identical to app key. Go to https://shopgun.com/developers/apps to get a track identifier for your app'))\n        \n        now = new Date().getTime()\n        evt = Object.assign {}, properties, {\n            '_e': type\n            '_v': version\n            '_i': SGN.util.uuid()\n            '_t': Math.round(new Date().getTime() / 1000)\n            '_a': @trackId\n        }\n\n        evt['l.h'] = @location.geohash if @location.geohash?\n        evt['l.ht'] = @location.time if @location.time?\n        evt['l.c'] = @location.country if @location.country?\n\n        pool.push evt\n        pool.shift() while pool.length > @poolLimit\n\n        dispatch()\n\n        @\n\n    setLocation: (location = {}) ->\n        for key, value of location\n            if @location.hasOwnProperty(key)\n                @location[key] = value\n\n        @\n\n    trackPagedPublicationOpened: (properties, version) ->\n        @trackEvent 1, properties, version\n    \n    trackPagedPublicationPageDisappeared: (properties, version) ->\n        @trackEvent 2, properties, version\n    \n    trackOfferOpened: (properties, version) ->\n        @trackEvent 3, properties, version\n    \n    trackClientSessionOpened: (properties, version) ->\n        @trackEvent 4, properties, version\n    \n    trackSearched: (properties, version) ->\n        @trackEvent 5, properties, version\n\n    trackIncitoPublicationOpened: (properties, version) ->\n        @trackEvent 8, properties, version\n    \n    createViewToken: (...parts) ->\n        str = [SGN.client.id].concat(parts).join ''\n        viewToken = SGN.util.btoa String.fromCharCode.apply(null, (md5(str, {asBytes: true})).slice(0,8))\n\n        viewToken\n\ndispatching = false\ndispatchLimit = 100\n\nship = (events = []) ->\n    req = fetch SGN.config.get('eventsTrackUrl'),\n        method: 'post'\n        timeout: 1000 * 20\n        headers:\n            'Content-Type': 'application/json; charset=utf-8'\n        body: JSON.stringify(events: events)\n    \n    req.then (response) -> response.json()\n_dispatch = ->\n    return if dispatching is true or pool.length is 0\n\n    events = pool.slice 0, dispatchLimit\n    nacks = 0\n    dispatching = true\n\n    ship(events)\n        .then (response) ->\n            dispatching = false\n\n            response.events.forEach (resEvent) ->\n                if resEvent.status is 'validation_error' or resEvent.status is 'ack'\n                    pool = pool.filter (poolEvent) -> poolEvent._i isnt resEvent.id\n                else if 'nack'\n                    nacks++\n\n                return\n\n            # Keep dispatching until the pool size reaches a sane level.\n            dispatch() if pool.length >= dispatchLimit and nacks is 0\n\n            return\n        .catch (err) ->\n            dispatching = false\n\n            throw err\n\n            return\n    \n    return\ndispatch = SGN.util.throttle _dispatch, 4000\n\nclientLocalStorage.set 'event-tracker-pool', []\n\ntry\n    window.addEventListener 'beforeunload', (e) ->\n        pool = pool.concat getPool()\n\n        clientLocalStorage.set 'event-tracker-pool', pool\n\n        return\n    , false\n","MicroEvent = require 'microevent'\n\nclass Pulse\n    constructor: ->\n        @destroyed = false\n        @connection = @connect()\n\n        return\n\n    destroy: ->\n        @destroyed = true\n\n        @connection.close()\n\n        @\n\n    connect: ->\n        connection = new WebSocket SGN.config.get('eventsPulseUrl')\n\n        connection.onopen = @onOpen\n        connection.onmessage = @onMessage\n        connection.onerror = @onError\n        connection.onclose = @onClose\n\n        connection\n\n    onOpen: =>\n        @trigger 'open'\n\n        return\n\n    onMessage: (e) =>\n        try\n            @trigger 'event', JSON.parse(e.data)\n\n        return\n\n    onError: ->\n        return\n\n    onClose: =>\n        if @destroyed is false\n            setTimeout =>\n                @connection = @connect()\n\n                return\n            , 2000\n\n        return\n\nMicroEvent.mixin Pulse\n\nmodule.exports = Pulse\n","module.exports =\n    Tracker: require './tracker'\n\n    Pulse: require './pulse'\n","fetch = require 'cross-fetch'\nSGN = require '../../sgn'\n{promiseCallbackInterop} = require '../../util'\n\nparseCookies = (cookies = []) ->\n    parsedCookies = {}\n\n    cookies.map (cookie) ->\n        parts = cookie.split '; '\n        keyValuePair = parts[0].split '='\n        key = keyValuePair[0]\n        value = keyValuePair[1]\n\n        parsedCookies[key] = value\n\n        return\n    \n    parsedCookies\n\nrequest = (options = {}, callback) ->\n    url = SGN.config.get 'graphUrl'\n    timeout = 1000 * 12\n    appKey = SGN.config.get 'appKey'\n    authToken = SGN.config.get 'authToken'\n    authTokenCookieName = 'shopgun-auth-token'\n    options =\n        method: 'post'\n        timeout: timeout\n        headers:\n            'Content-Type': 'application/json; charset=utf-8'\n        body: JSON.stringify\n            query: options.query\n            operationName: options.operationName\n            variables: options.variables\n\n    # Set cookies manually in node.js.\n    if SGN.util.isNode() and authToken?\n        options.cookies = [\n            key: authTokenCookieName\n            value: authToken\n            url: url\n        ]\n    else if SGN.util.isBrowser()\n        options.credentials = 'include'\n\n    fetch(url, options)\n        .then (response) ->\n            response.json().then (json) ->\n                # Update auth token as it might have changed.\n                if SGN.util.isNode()\n                    cookies = parseCookies response.headers?['set-cookie']\n                    authCookie = cookies[authTokenCookieName]\n\n                    if SGN.config.get('authToken') isnt authCookie\n                        SGN.config.set 'authToken', authCookie\n\n                if response.status isnt 200\n                    callback SGN.util.error(new Error('Graph API error'),\n                        code: 'GraphAPIError'\n                        statusCode: data.statusCode\n                    )\n                else\n                    callback null, json\n        .catch callback\n    \n    return\n\nmodule.exports = promiseCallbackInterop request, 1","module.exports =\n    request: require './request'\n","fetch = require 'cross-fetch'\nSGN = require '../../sgn'\n{promiseCallbackInterop} = require '../../util'\n\nrequest = (options = {}, callback, secondTime) ->\n    SGN.CoreKit.session.ensure (err) ->\n        return callback(err) if err?\n\n        url = SGN.config.get('coreUrl') + (options.url ? '')\n        headers = options.headers ? {}\n        json = if typeof options.json is 'boolean' then options.json else true\n        token = SGN.config.get 'coreSessionToken'\n        appVersion = SGN.config.get 'appVersion'\n        appSecret = SGN.config.get 'appSecret'\n        locale = SGN.config.get 'locale'\n        qs = options.qs ? {}\n        geo = options.geolocation\n        body = options.body\n        \n        headers['X-Token'] = token\n        headers['X-Signature'] = SGN.CoreKit.session.sign appSecret, token if appSecret?\n\n        if json\n            headers['Content-Type'] = 'application/json'\n            headers['Accept'] = 'application/json'\n\n            if body\n                body = JSON.stringify(body)\n\n        qs.r_locale = locale if locale?\n        qs.api_av = appVersion if appVersion?\n\n        if geo?\n            qs.r_lat = geo.latitude if geo.latitude? and not qs.r_lat?\n            qs.r_lng = geo.longitude if geo.longitude? and not qs.r_lng?\n            qs.r_radius = geo.radius if geo.radius? and not qs.r_radius?\n            qs.r_sensor = geo.sensor if geo.sensor? and not qs.r_sensor?\n        \n        if Object.keys(qs).length\n            url += '?' + (Object.keys(qs).map (k) ->\n                if Array.isArray k\n                    return qs[k].map((val) -> \"#{encodeURIComponent(k)}[]=#{encodeURIComponent(val)}\").join '&'\n                \n                \"#{encodeURIComponent(k)}=#{encodeURIComponent(qs[k])}\"\n            ).join '&'\n\n        req = fetch url,\n            method: options.method\n            body: body\n            headers: headers\n        \n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    token = SGN.config.get 'coreSessionToken'\n                    responseToken = response.headers.get 'x-token'\n\n                    SGN.CoreKit.session.saveToken responseToken if responseToken and token isnt responseToken\n\n                    if response.status >= 200 and response.status < 300 or response.status is 304\n                        callback null, json\n                    else\n                        if secondTime isnt true and json?.code in [1101, 1107, 1108]\n                            SGN.config.set coreSessionToken: undefined\n\n                            request options, callback, true\n                        else\n                            callback SGN.util.error(new Error('Core API error'),\n                                code: 'CoreAPIError'\n                                statusCode: response.status\n                            ), json\n                    \n                    return\n            .catch callback\n\n    return\n\nmodule.exports = promiseCallbackInterop request, 1\n","fetch = require 'cross-fetch'\nsha256 = require 'sha256'\nSGN = require '../../sgn'\nclientCookieStorage = require '../../storage/client-cookie'\ncallbackQueue = []\nrenewed = false\n\nsession =\n    ttl: 1 * 60 * 60 * 24 * 60\n\n    saveToken: (token) ->\n        throw new Error('No token provided for saving') if not token\n\n        SGN.config.set coreSessionToken: token\n\n        session.saveCookie()\n\n        return\n\n    saveClientId: (clientId) ->\n        SGN.config.set coreSessionClientId: clientId\n\n        session.saveCookie()\n\n        return\n\n    saveCookie: ->\n        clientCookieStorage.set 'session',\n            token: SGN.config.get 'coreSessionToken'\n            client_id: SGN.config.get 'coreSessionClientId'\n\n        return\n\n    create: (callback) ->\n        key = SGN.config.get 'appKey'\n        ttl = session.ttl\n\n        req = fetch SGN.config.get('coreUrl') + \"/v2/sessions?api_key=#{key}&token_ttl=#{ttl}\",\n            method: 'post'\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 201\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not create session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n        \n        return\n    \n    update: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        req = fetch SGN.config.get('coreUrl') + '/v2/sessions',\n            method: 'put'\n            headers: headers\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 200\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not update session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n\n        return\n\n    renew: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret\n\n        req = fetch SGN.config.get('coreUrl') + '/v2/sessions',\n            method: 'put'\n            headers: headers\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 200\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not renew session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n\n        return\n\n    ensure: (callback) ->\n        queueCount = callbackQueue.length\n        complete = (err) ->\n            callbackQueue = callbackQueue.filter (fn) ->\n                fn err\n\n                false\n\n            return\n\n        callbackQueue.push callback\n\n        if queueCount is 0\n            if not SGN.config.get('coreSessionToken')?\n                session.create complete\n            else if renewed is false\n                renewed = true\n                session.renew (err) ->\n                    if err?\n                        session.create complete\n                    else\n                        complete()\n                    \n                    return\n            else\n                complete()\n\n        return\n\n    sign: (appSecret, token) ->\n        sha256 [appSecret, token].join('')\n\nmodule.exports = session\n","SGN = require '../../sgn'\nrequest = require './request'\nsession = require './session'\n\nmodule.exports =\n    request: request\n\n    session: session\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpread\n    constructor: (@options = {}) ->\n        @contentsRendered = false\n        @hotspotsRendered = false\n        @el = @renderEl()\n\n        return\n\n    getId: ->\n        @options.id\n\n    getEl: ->\n        @el\n\n    getPages: ->\n        @options.pages\n\n    renderEl: ->\n        el = document.createElement 'div'\n        pageIds = @getPages().map (page) -> page.id\n\n        el.className = 'verso__page-spread sgn-pp__page-spread'\n\n        el.setAttribute 'data-id', @getId()\n        el.setAttribute 'data-type', 'page'\n        el.setAttribute 'data-width', @options.width\n        el.setAttribute 'data-page-ids', pageIds.join(',')\n        el.setAttribute 'data-max-zoom-scale', @options.maxZoomScale\n        el.setAttribute 'data-zoomable', false\n\n        el\n\n    renderContents: ->\n        id = @getId()\n        el = @getEl()\n        pages = @getPages()\n        pageCount = pages.length\n        imageLoads = 0\n\n        pages.forEach (page, i) =>\n            image = page.images.medium\n            pageEl = document.createElement 'div'\n            loaderEl = document.createElement 'div'\n\n            pageEl.className = 'sgn-pp__page verso__page'\n            pageEl.setAttribute('data-id', page.id) if page.id?\n\n            if pageCount is 2\n                pageEl.className += if i is 0 then ' verso-page--verso' else ' verso-page--recto'\n\n            pageEl.appendChild loaderEl\n            el.appendChild pageEl\n\n            loaderEl.className = 'sgn-pp-page__loader'\n            loaderEl.innerHTML = \"<span>#{page.label}</span>\"\n\n            SGN.util.loadImage image, (err, width, height) =>\n                if not err?\n                    isComplete = ++imageLoads is pageCount\n\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n                    pageEl.setAttribute 'data-width', width\n                    pageEl.setAttribute 'data-height', height\n                    pageEl.innerHTML = '&nbsp;'\n\n                    el.setAttribute('data-zoomable', true) if isComplete\n\n                    @trigger 'pageLoaded', pageSpreadId: id, page: page\n                    @trigger 'pagesLoaded', pageSpreadId: id, pages: pages if isComplete\n                else\n                    loaderEl.innerHTML = '<span>!</span>'\n\n                return\n\n            return\n\n        @contentsRendered = true\n\n        @\n\n    clearContents: (pageSpread, versoPageSpread) ->\n        @el.innerHTML = ''\n        @contentsRendered = false\n\n        @\n\n    zoomIn: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page')\n        pages = @getPages()\n\n        pageEls.forEach (pageEl) =>\n            id = pageEl.getAttribute 'data-id'\n            page = pages.find (page) -> page.id is id\n            image = page.images.large\n\n            SGN.util.loadImage image, (err) =>\n                if not err? and @el.getAttribute('data-active') is 'true'\n                    pageEl.setAttribute 'data-image', pageEl.style.backgroundImage\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n\n                return\n\n            return\n\n        return\n\n    zoomOut: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page[data-image]')\n\n        pageEls.forEach (pageEl) ->\n            pageEl.style.backgroundImage = pageEl.getAttribute 'data-image'\n            \n            pageEl.removeAttribute 'data-image'\n\n            return\n\n        return\n\nMicroEvent.mixin PagedPublicationPageSpread\n\nmodule.exports = PagedPublicationPageSpread\n","MicroEvent = require 'microevent'\nPageSpread = require './page-spread'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpreads\n    constructor: (@options) ->\n        @collection = []\n        @ids = {}\n\n        return\n\n    get: (id) ->\n        @ids[id]\n\n    getFrag: ->\n        frag = document.createDocumentFragment()\n\n        @collection.forEach (pageSpread) -> frag.appendChild pageSpread.el\n\n        frag\n\n    update: (pageMode = 'single') ->\n        pageSpreads = []\n        ids = {}\n        pages = @options.pages.slice()\n        width = @options.width\n        maxZoomScale = @options.maxZoomScale\n\n        if pageMode is 'single'\n            pages.forEach (page) -> pageSpreads.push [page]\n        else\n            firstPage = pages.shift()\n            lastPage = if pages.length % 2 is 1 then pages.pop() else null\n            midstPageSpreads = SGN.util.chunk pages, 2\n\n            pageSpreads.push [firstPage] if firstPage?\n            midstPageSpreads.forEach (midstPages) -> pageSpreads.push midstPages.map (page) -> page\n            pageSpreads.push [lastPage] if lastPage?\n\n        @collection = pageSpreads.map (pages, i) =>\n            id = \"#{pageMode}-#{i}\"\n            pageSpread = new PageSpread\n                width: width\n                maxZoomScale: maxZoomScale\n                pages: pages\n                id: id\n\n            pageSpread.bind 'pageLoaded', (e) => @trigger 'pageLoaded', e\n            pageSpread.bind 'pagesLoaded', (e) => @trigger 'pagesLoaded', e\n\n            ids[id] = pageSpread\n\n            pageSpread\n        @ids = ids\n\n        @\n\nMicroEvent.mixin PagedPublicationPageSpreads\n\nmodule.exports = PagedPublicationPageSpreads\n","MicroEvent = require 'microevent'\nVerso = require 'verso-browser'\nPageSpreads = require './page-spreads'\nclientLocalStorage = require '../../storage/client-local'\nSGN = require '../../sgn'\n\nclass PagedPublicationCore\n    defaults:\n        pages: []\n        pageSpreadWidth: 100\n        pageSpreadMaxZoomScale: 2.3\n        idleDelay: 1000\n        resizeDelay: 400\n        color: '#ffffff'\n\n    constructor: (el, options = {}) ->\n        @options = @makeOptions options, @defaults\n        @pageId = @getOption 'pageId'\n        @els =\n            root: el\n            pages: el.querySelector '.sgn-pp__pages'\n            verso: el.querySelector '.verso'\n        @pageMode = @getPageMode()\n        @pageSpreads = new PageSpreads\n            pages: @getOption 'pages'\n            maxZoomScale: @getOption 'pageSpreadMaxZoomScale'\n            width: @getOption 'pageSpreadWidth'\n\n        @pageSpreads.bind 'pageLoaded', @pageLoaded.bind(@)\n        @pageSpreads.bind 'pagesLoaded', @pagesLoaded.bind(@)\n\n        @setColor @getOption('color')\n\n        # It's important to insert the page spreads before instantiating Verso.\n        @els.pages.parentNode.insertBefore @pageSpreads.update(@pageMode).getFrag(), @els.pages\n\n        @verso = @createVerso()\n\n        @bind 'started', @start.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    start: ->\n        verso = @getVerso()\n        verso.start()\n    \n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @resizeListener = SGN.util.throttle @resize, @getOption('resizeDelay')\n\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'beforeunload', @unload, false\n\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n        \n        return\n\n    destroy: ->\n        verso = @getVerso()\n        pageSpreadEls = verso.el.querySelectorAll '.sgn-pp__page-spread'\n\n        @els.root.removeAttribute 'data-started'\n        @els.root.removeAttribute 'data-idle'\n        @els.root.removeAttribute 'data-navigating'\n        @els.root.removeAttribute 'data-color-brightness'\n        @els.root.removeAttribute 'data-zoomed-in'\n\n        @els.root.style.backgroundColor = '#ffffff'\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n\n        verso.destroy()\n\n        window.removeEventListener 'resize', @resizeListener, false\n        window.removeEventListener 'beforeunload', @unload, false\n\n        return\n\n    makeOptions: (options, defaults) ->\n        opts = {}\n\n        opts[key] = options[key] ? defaults[key] for key, value of options\n\n        opts\n\n    getOption: (key) ->\n        @options[key]\n\n    setColor: (color) ->\n        @els.root.setAttribute 'data-color-brightness', SGN.util.getColorBrightness(color)\n        @els.root.style.backgroundColor = color\n\n        return\n\n    createVerso: ->\n        verso = new Verso @els.verso, pageId: @pageId\n\n        verso.bind 'beforeNavigation', @beforeNavigation\n        verso.bind 'afterNavigation', @afterNavigation\n        verso.bind 'attemptedNavigation', @attemptedNavigation\n        verso.bind 'clicked', @clicked\n        verso.bind 'doubleClicked', @doubleClicked\n        verso.bind 'pressed', @pressed\n        verso.bind 'contextmenu', @contextmenu\n        verso.bind 'panStart', @panStart\n        verso.bind 'panEnd', @panEnd\n        verso.bind 'zoomedIn', @zoomedIn\n        verso.bind 'zoomedOut', @zoomedOut\n\n        verso\n\n    getVerso: ->\n        @verso\n\n    getContentRect: (pageSpread) ->\n        rect =\n            top: 0\n            left: 0\n            right: 0\n            bottom: 0\n            width: 0\n            height: 0\n        pageEls = pageSpread.getPageEls()\n        pageEl = pageEls[0]\n        pageCount = pageEls.length\n\n        return rect if not pageCount\n        \n        scale = @getVerso().transform.scale\n        pageWidth = pageEl.offsetWidth * pageCount * scale\n        pageHeight = pageEl.offsetHeight * scale\n        imageRatio = +pageEl.getAttribute('data-height') / (+pageEl.getAttribute('data-width') * pageCount)\n        actualHeight = pageHeight\n        actualWidth = actualHeight / imageRatio\n        actualWidth = Math.min pageWidth, actualWidth\n        actualHeight = actualWidth * imageRatio\n        clientRect = pageEl.getBoundingClientRect()\n\n        rect.width = actualWidth\n        rect.height = actualHeight\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2\n        rect.right = rect.width + rect.left\n        rect.bottom = rect.height + rect.top\n\n        rect\n\n    formatProgressLabel: (pageSpread) ->\n        pages = pageSpread?.options.pages ? []\n        pageIds = pages.map (page) -> page.id\n        pageLabels = pages.map (page) -> page.label\n        pageCount = @getOption('pages').length\n        label = if pageIds.length > 0 then pageLabels.join('-') + ' / ' + pageCount else null\n\n        label\n\n    renderPageSpreads: ->\n        @getVerso().pageSpreads.forEach (pageSpread) =>\n            visibility = pageSpread.getVisibility()\n            match = @pageSpreads.get pageSpread.getId()\n\n            if match?\n                if visibility is 'visible' and match.contentsRendered is false\n                    setTimeout match.renderContents.bind(match), 0\n                if visibility is 'gone' and match.contentsRendered is true\n                    setTimeout match.clearContents.bind(match), 0\n\n            return\n\n        @\n\n    findPage: (pageId) ->\n        @getOption('pages').find (page) -> page.id is pageId\n\n    pageLoaded: (e) ->\n        @trigger 'pageLoaded', e\n\n        return\n\n    pagesLoaded: (e) ->\n        @trigger 'pagesLoaded', e\n\n        return\n\n    beforeNavigation: (e) =>\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n        progress = position / (pageSpreadCount - 1) * 100\n        progressLabel = @formatProgressLabel pageSpread\n\n        @els.root.setAttribute 'data-navigating', true\n\n        @renderPageSpreads()\n        @resetIdleTimer()\n        @startIdleTimer()\n        @trigger 'beforeNavigation',\n            verso: e\n            pageSpread: pageSpread\n            newSpreadEl: newSpreadEl\n            progress: progress\n            progressLabel: progressLabel\n            pageSpreadCount: pageSpreadCount\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    afterNavigation: (e) =>\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n\n        @els.root.setAttribute 'data-navigating', false\n\n        @trigger 'afterNavigation',\n            verso: e\n            pageSpread: pageSpread\n            pageSpreadCount: pageSpreadCount\n            newSpreadEl: newSpreadEl\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    attemptedNavigation: (e) =>\n        @trigger 'attemptedNavigation', verso: e\n\n        return\n\n    clicked: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'clicked', verso: e, page: page\n\n        return\n\n    doubleClicked: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'doubleClicked', verso: e, page: page\n\n        return\n\n    pressed: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'pressed', verso: e, page: page\n\n        return\n\n    contextmenu: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'contextmenu', verso: e, page: page\n\n        return\n\n    panStart: =>\n        @resetIdleTimer()\n        @trigger 'panStart', scale: @getVerso().transform.scale\n\n        return\n\n    panEnd: =>\n        @startIdleTimer()\n        @trigger 'panEnd'\n\n        return\n\n    zoomedIn: (e) =>\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomIn() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', true\n        @trigger 'zoomedIn', verso: e, pageSpread: pageSpread\n\n        return\n\n    zoomedOut: (e) =>\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomOut() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', false\n        @trigger 'zoomedOut', verso: e, pageSpread: pageSpread\n\n        return\n\n    getPageMode: ->\n        pageMode = @getOption 'pageMode'\n\n        if not pageMode?\n            width = @els.root.offsetWidth\n            height = @els.root.offsetHeight\n\n            pageMode = if height / width < 0.8 then 'double' else 'single'\n\n        pageMode\n\n    resetIdleTimer: ->\n        clearTimeout @idleTimeout\n\n        @els.root.setAttribute 'data-idle', false\n\n        @\n\n    startIdleTimer: ->\n        @idleTimeout = setTimeout =>\n            @els.root.setAttribute 'data-idle', true\n\n            return\n        , @getOption('idleDelay')\n\n        @\n\n    switchPageMode: (pageMode) ->\n        return @ if @pageMode is pageMode\n\n        verso = @getVerso()\n        pageIds = verso.getPageSpreadFromPosition(verso.getPosition()).getPageIds()\n        pageSpreadEls = @getVerso().el.querySelectorAll '.sgn-pp__page-spread'\n\n        @pageMode = pageMode\n\n        @pageSpreads.update @pageMode\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n        @els.pages.parentNode.insertBefore @pageSpreads.getFrag(), @els.pages\n\n        verso.refresh()\n        verso.navigateTo verso.getPageSpreadPositionFromPageId(pageIds[0]), duration: 0\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @\n\n    overridePageSpreadContentRect: (pageSpread) ->\n        if pageSpread.getType() is 'page'\n            pageSpread.getContentRect = => @getContentRect pageSpread\n\n    resize: =>\n        pageMode = @getPageMode()\n\n        if not @getOption('pageMode')? and pageMode isnt @pageMode\n            @switchPageMode pageMode\n        else\n            @trigger 'resized'\n\n        return\n\n    unload: =>\n        @trigger 'disappeared'\n\n        return\n\nMicroEvent.mixin PagedPublicationCore\n\nmodule.exports = PagedPublicationCore\n","MicroEvent = require 'microevent'\nMustache = require 'mustache'\n\nclass PagedPublicationHotspots\n    constructor: ->\n        @currentPageSpreadId = null\n        @pageSpreadsLoaded = {}\n        @cache = {}\n\n        @bind 'hotspotsReceived', @hotspotsReceived.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'pagesLoaded', @pagesLoaded.bind(@)\n        @bind 'resized', @resized.bind(@)\n\n        return\n\n    renderHotspots: (data) ->\n        frag = document.createDocumentFragment()\n        contentRect = data.versoPageSpread.getContentRect()\n        pageSpreadEl = data.pageSpread.getEl()\n        hotspotEls = pageSpreadEl.querySelectorAll '.sgn-pp__hotspot'\n        boundingRect = pageSpreadEl.getBoundingClientRect()\n\n        hotspotEl.parentNode.removeChild hotspotEl for hotspotEl in hotspotEls\n\n        for id, hotspot of data.hotspots\n            position = @getPosition data.pages, data.ratio, hotspot\n            el = @renderHotspot hotspot, position, contentRect, boundingRect\n            \n            frag.appendChild el\n\n        pageSpreadEl.appendChild frag\n\n        @\n\n    renderHotspot: (hotspot, position, contentRect, boundingRect) ->\n        el = document.createElement 'div'\n        top = Math.round contentRect.height / 100 * position.top\n        left = Math.round contentRect.width / 100 * position.left\n        width = Math.round contentRect.width / 100 * position.width\n        height = Math.round contentRect.height / 100 * position.height\n\n        top += Math.round contentRect.top\n        left += Math.round contentRect.left\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        el.className = 'sgn-pp__hotspot verso__overlay'\n        el.setAttribute 'data-id', hotspot.id if hotspot.id?\n        el.setAttribute 'data-type', hotspot.type if hotspot.type?\n        el.innerHTML = Mustache.render '', hotspot\n\n        el.style.top = \"#{top}px\"\n        el.style.left = \"#{left}px\"\n        el.style.width = \"#{width}px\"\n        el.style.height = \"#{height}px\"\n\n        el\n\n    getPosition: (pages, ratio, hotspot) ->\n        minX = null\n        minY = null\n        maxX = null\n        maxY = null\n        pageNumbers = pages.map (page) -> page.pageNumber\n\n        for pageNumber of hotspot.locations\n            continue if pageNumbers.indexOf(+pageNumber) is -1\n\n            hotspot.locations[pageNumber].forEach (coords) ->\n                x = coords[0]\n                y = coords[1]\n\n                x +=1 if pages[1] and pageNumbers[1] is +pageNumber\n                x /= pages.length\n\n                if not minX?\n                    minX = maxX = x\n                    minY = maxY = y\n\n                minX = x if x < minX\n                maxX = x if x > maxX\n                minY = y if y < minY\n                maxY = y if y > maxY\n\n        width = maxX - minX\n        height = maxY - minY\n\n        top: minY / ratio * 100\n        left: minX * 100\n        width: width * 100\n        height: height / ratio * 100\n\n    requestHotspots: (pageSpreadId, pages) ->\n        @trigger 'hotspotsRequested',\n            id: pageSpreadId\n            pages: pages\n\n        return\n\n    hotspotsReceived: (e) ->\n        pageSpreadId = e.pageSpread.getId()\n\n        @setCache pageSpreadId, e\n        @renderHotspots e\n\n        return\n\n    getCache: (pageSpreadId) ->\n        @cache[pageSpreadId]\n\n    setCache: (pageSpreadId, data) ->\n        @cache[pageSpreadId] = data\n\n        @\n\n    afterNavigation: (e) ->\n        return if not e.pageSpread?\n\n        id = e.pageSpread.getId()\n\n        @currentPageSpreadId = id\n        @requestHotspots id, e.pageSpread.getPages() if @pageSpreadsLoaded[id]\n\n        return\n\n    pagesLoaded: (e) ->\n        @pageSpreadsLoaded[e.pageSpreadId] = true\n        @requestHotspots e.pageSpreadId, e.pages if @currentPageSpreadId is e.pageSpreadId\n\n        return\n\n    resized: (e) ->\n        data = @getCache @currentPageSpreadId\n\n        @renderHotspots data if data?\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspots\n\nmodule.exports = PagedPublicationHotspots\n\n\n","module.exports =\n    ESC: 27\n    ARROW_RIGHT: 39\n    ARROW_LEFT: 37\n    SPACE: 32\n    NUMBER_ONE: 49\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationControls\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            progress: el.querySelector '.sgn-pp__progress'\n            progressBar: el.querySelector '.sgn-pp-progress__bar'\n            progressLabel: el.querySelector '.sgn-pp__progress-label'\n            prevControl: el.querySelector '.sgn-pp__control[data-direction=prev]'\n            nextControl: el.querySelector '.sgn-pp__control[data-direction=next]'\n            close: el.querySelector '.sgn-pp--close'\n\n        @keyDownHandler = SGN.util.throttle @keyDown, 150, @\n        @els.root.addEventListener 'keydown', @keyDownHandler, false if @options.keyboard is true\n        @els.prevControl.addEventListener 'mousedown', @prevClicked, false if @els.prevControl?\n        @els.nextControl.addEventListener 'mousedown', @nextClicked, false if @els.nextControl?\n        @els.close.addEventListener 'mousedown', @closeClicked, false if @els.close?\n\n        @bind 'beforeNavigation', @beforeNavigation\n        @bind 'destroyed', @destroy\n\n        return\n\n    destroy: =>\n        @els.root.removeEventListener 'keydown', @keyDownHandler, false if @options.keyboard is true\n        @els.prevControl.removeEventListener 'mousedown', @prevClicked, false if @els.prevControl?\n        @els.nextControl.removeEventListener 'mousedown', @nextClicked, false if @els.nextControl?\n        @els.close.removeEventListener 'mousedown', @closeClicked, false if @els.close?\n\n        return\n\n    beforeNavigation: (e) =>\n        showProgress = typeof e.progressLabel is 'string' and e.progressLabel.length > 0\n        visibilityClassName = 'sgn-pp--hidden'\n\n        if @els.progress? and @els.progressBar?\n            @els.progressBar.style.width = \"#{e.progress}%\"\n\n            if showProgress is true\n                @els.progress.classList.remove visibilityClassName\n            else\n                @els.progress.classList.add visibilityClassName\n\n        if @els.progressLabel?\n            if showProgress is true\n                @els.progressLabel.textContent = e.progressLabel\n                @els.progressLabel.classList.remove visibilityClassName\n            else\n                @els.progressLabel.classList.add visibilityClassName\n\n        if @els.prevControl?\n            if e.verso.newPosition is 0\n                @els.prevControl.classList.add visibilityClassName\n            else\n                @els.prevControl.classList.remove visibilityClassName\n\n        if @els.nextControl?\n            if e.verso.newPosition is e.pageSpreadCount - 1\n                @els.nextControl.classList.add visibilityClassName\n            else\n                @els.nextControl.classList.remove visibilityClassName\n\n        return\n\n    prevClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'prev'\n\n        return\n\n    nextClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'next'\n\n        return\n    \n    closeClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'close'\n\n        return\n\n    keyDown: (e) =>\n        keyCode = e.keyCode\n\n        if keyCodes.ARROW_LEFT is keyCode\n            @trigger 'prev', duration: 0\n        else if keyCodes.ARROW_RIGHT is keyCode or keyCodes.SPACE is keyCode\n            @trigger 'next', duration: 0\n        else if keyCodes.NUMBER_ONE is keyCode\n            @trigger 'first', duration: 0\n\n        return\n\nMicroEvent.mixin PagedPublicationControls\n\nmodule.exports = PagedPublicationControls\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationEventTracking\n    constructor: (@eventTracker, @id) ->\n        @hidden = true\n        @pageSpread = null\n\n        @bind 'appeared', @appeared.bind(@)\n        @bind 'disappeared', @disappeared.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        @bind 'panStart', @panStart.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    destroy: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    trackOpened: (properties) ->\n        return @ if not @eventTracker?\n\n        @eventTracker.trackPagedPublicationOpened\n            'pp.id': @id\n            'vt': @eventTracker.createViewToken(@id)\n\n        @\n\n    trackPageSpreadDisappeared: (pageNumbers) ->\n        return @ if not @eventTracker?\n        \n        pageNumbers.forEach (pageNumber) =>\n            @eventTracker.trackPagedPublicationPageDisappeared\n                'pp.id': @id\n                'ppp.n': pageNumber\n                'vt': @eventTracker.createViewToken(@id, pageNumber)\n            \n            return\n\n        @\n\n    appeared: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    disappeared: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    beforeNavigation: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    afterNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    attemptedNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    panStart: (e) ->\n        @pageSpreadDisappeared() if e.scale is 1\n\n        return\n\n    pageSpreadAppeared: (pageSpread) ->\n        if pageSpread? and @hidden is true\n            @pageSpread = pageSpread\n            @hidden = false\n\n        return\n\n    pageSpreadDisappeared: ->\n        if @pageSpread? and @hidden is false\n            @trackPageSpreadDisappeared @pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = true\n            @pageSpread = null\n\n        return\n\nMicroEvent.mixin PagedPublicationEventTracking\n\nmodule.exports = PagedPublicationEventTracking","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nCore = require './core'\nHotspots = require './hotspots'\nControls = require './controls'\nEventTracking = require './event-tracking'\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @_core = new Core @el,\n            id: @options.id\n            pages: @options.pages\n            pageSpreadWidth: @options.pageSpreadWidth\n            pageSpreadMaxZoomScale: @options.pageSpreadMaxZoomScale\n            pageId: @options.pageId\n            idleDelay: @options.idleDelay\n            resizeDelay: @options.resizeDelay\n            color: @options.color\n        @_hotspots = new Hotspots()\n        @_controls = new Controls @el, keyboard: @options.keyboard\n        @_eventTracking = new EventTracking @options.eventTracker, @options.id\n        @viewSession = SGN.util.uuid()\n        @hotspots = null\n        @hotspotQueue = []\n        @popover = null\n\n        @_setupEventListeners()\n\n        return\n\n    start: ->\n        @_eventTracking.trackOpened()\n        @_core.trigger 'started'\n\n        @\n\n    destroy: ->\n        @_core.trigger 'destroyed'\n        @_hotspots.trigger 'destroyed'\n        @_controls.trigger 'destroyed'\n        @_eventTracking.trigger 'destroyed'\n\n        @trigger 'destroyed'\n\n        @\n\n    navigateTo: (position, options) ->\n        @navigateToIndex position, options\n\n        @\n\n    navigateToIndex: (position, options) ->\n        @_core.getVerso().navigateTo position, options\n\n        @\n    \n    navigateToPageId: (pageId, options) ->\n        position = @_core.getVerso().getPageSpreadPositionFromPageId pageId\n        \n        @_core.getVerso().navigateTo position, options\n\n    first: (options) ->\n        @_core.getVerso().first options\n\n        @\n\n    prev: (options) ->\n        @_core.getVerso().prev options\n\n        @\n\n    next: (options) ->\n        @_core.getVerso().next options\n\n        @\n\n    last: (options) ->\n        @_core.getVerso().last options\n\n        @\n\n    _setupEventListeners: ->\n        @_controls.bind 'prev', (e) =>\n            @prev e\n            \n            return\n        @_controls.bind 'next', (e) =>\n            @next e\n            \n            return\n        @_controls.bind 'first', (e) =>\n            @first e\n            \n            return\n        @_controls.bind 'last', (e) =>\n            @last e\n            \n            return\n        @_controls.bind 'close', (e) =>\n            @destroy e\n\n            return\n        @_hotspots.bind 'hotspotsRequested', (e) =>\n            @trigger 'hotspotsRequested', e\n\n            return\n\n        @_core.bind 'appeared', (e) =>\n            @_eventTracking.trigger 'appeared', e\n            @trigger 'appeared', e\n\n            return\n        @_core.bind 'disappeared', (e) =>\n            @_eventTracking.trigger 'disappeared', e\n            @trigger 'disappeared', e\n\n            return\n        @_core.bind 'beforeNavigation', (e) =>\n            @_eventTracking.trigger 'beforeNavigation', e\n            @_controls.trigger 'beforeNavigation', e\n            @trigger 'beforeNavigation', e\n\n            return\n        @_core.bind 'afterNavigation', (e) =>\n            @_eventTracking.trigger 'afterNavigation', e\n            @_hotspots.trigger 'afterNavigation', e\n            @trigger 'afterNavigation', e\n\n            return\n        @_core.bind 'attemptedNavigation', (e) =>\n            @_eventTracking.trigger 'attemptedNavigation', e\n            @trigger 'attemptedNavigation', e\n\n            return\n        @_core.bind 'clicked', (e) =>\n            @_eventTracking.trigger 'clicked', e\n            @trigger 'clicked', e\n\n            return\n        @_core.bind 'doubleClicked', (e) =>\n            @_eventTracking.trigger 'doubleClicked', e\n            @trigger 'doubleClicked', e\n\n            return\n        @_core.bind 'contextmenu', (e) =>\n            @trigger 'contextmenu', e\n\n            return\n        @_core.bind 'pressed', (e) =>\n            @_eventTracking.trigger 'pressed', e\n            @trigger 'pressed', e\n\n            return\n        @_core.bind 'panStart', (e) =>\n            @_eventTracking.trigger 'panStart', e\n            @trigger 'panStart', e\n\n            return\n        @_core.bind 'zoomedIn', (e) =>\n            @_eventTracking.trigger 'zoomedIn', e\n            @trigger 'zoomedIn', e\n\n            return\n        @_core.bind 'zoomedOut', (e) =>\n            @_eventTracking.trigger 'zoomedOut', e\n            @trigger 'zoomedOut', e\n\n            return\n        @_core.bind 'pageLoaded', (e) =>\n            @_eventTracking.trigger 'pageLoaded', e\n            @trigger 'pageLoaded', e\n\n            return\n        @_core.bind 'pagesLoaded', (e) =>\n            @_hotspots.trigger 'pagesLoaded', e\n            @trigger 'pagesLoaded', e\n\n            return\n        @_core.bind 'resized', (e) =>\n            @_hotspots.trigger 'resized'\n            @trigger 'resized', e\n\n            return\n\n        @bind 'hotspotsRequested', @hotspotsRequested.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'contextmenu', @contextmenu.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n\n        return\n\n    pickHotspot: (e, callback) ->\n        return if not @hotspots?\n\n        if @popover?\n            @popover.destroy()\n            @popover = null\n        \n        hotspots = e.verso.overlayEls.map (overlayEl) =>\n            @hotspots[overlayEl.getAttribute('data-id')]\n\n        if hotspots.length is 1\n            callback hotspots[0]\n        else if hotspots.length > 1\n            @popover = SGN.CoreUIKit.singleChoicePopover\n                el: @el\n                header: SGN.translations.t 'paged_publication.hotspot_picker.header'\n                x: e.verso.x\n                y: e.verso.y\n                items: hotspots\n                    .filter (hotspot) -> hotspot.type is 'offer'\n                    .map (hotspot) ->\n                        id: hotspot.id\n                        title: hotspot.offer.heading\n                        subtitle: hotspot.offer.pricing.currency + '' + hotspot.offer.pricing.price\n            , (e) =>\n                callback @hotspots[e.id]\n\n                return\n        \n        return\n\n    processHotspotQueue: ->\n        return if not @hotspots?\n\n        @hotspotQueue = @hotspotQueue.filter (hotspotRequest) =>\n            hotspots = {}\n            versoPageSpread = @_core.getVerso().pageSpreads.find (pageSpread) ->\n                pageSpread.getId() is hotspotRequest.id\n\n            for id, hotspot of @hotspots\n                continue if hotspots[id]?\n\n                for page in hotspotRequest.pages\n                    if hotspot.locations[page.pageNumber]?\n                        hotspots[id] =\n                            type: hotspot.type\n                            id: hotspot.id\n                            locations: hotspot.locations\n                        \n                        break\n\n            @_hotspots.trigger 'hotspotsReceived',\n                pageSpread: @_core.pageSpreads.get hotspotRequest.id\n                versoPageSpread: versoPageSpread\n                ratio: @options.hotspotRatio\n                pages: hotspotRequest.pages\n                hotspots: hotspots\n\n            false\n\n        return\n\n    hotspotsRequested: (e) ->\n        @hotspotQueue.push e\n        @processHotspotQueue()\n\n        return\n    \n    applyHotspots: (hotspots = {}) ->\n        @hotspots = hotspots\n\n        @processHotspotQueue()\n\n        return\n    \n    beforeNavigation: ->\n        @popover.destroy() if @popover?\n\n        return\n    \n    clicked: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotClicked', hotspot\n\n            return\n            \n        return\n    \n    contextmenu: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotContextmenu', hotspot\n\n            return\n        \n        return\n    \n    pressed: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotPressed', hotspot\n\n            return\n            \n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","MicroEvent = require 'microevent'\nSGN = require '../../core'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        return\n\n    createViewer: (data, viewerOptions) ->\n        new SGN.PagedPublicationKit.Viewer @options.el, {\n            id: @options.id\n            ownedBy: data.details.dealer_id\n            color: '#' + data.details.branding.pageflip.color\n            hotspotRatio: data.details.dimensions.height\n            keyboard: true\n            pageId: @options.pageId\n            eventTracker: @options.eventTracker\n            pages: @transformPages data.pages\n            ...viewerOptions\n        }\n\n    transformPages: (pages) ->\n        pages.map (page, i) ->\n            pageNumber = i + 1\n\n            id: 'page' + pageNumber\n            label: pageNumber + ''\n            pageNumber: pageNumber\n            images:\n                medium: page.view\n                large: page.zoom\n\n    applyHotspots: (viewer, hotspots) ->\n        obj = {}\n\n        hotspots.forEach (hotspot) -> obj[hotspot.id] = hotspot\n        \n        viewer.applyHotspots obj\n\n        return\n    \n    fetch: (callback) ->\n        SGN.util.async.parallel [@fetchDetails, @fetchPages], (result) ->\n            data =\n                details: result[0][1]\n                pages: result[1][1]\n\n            if result[0][0]?\n                callback result[0][0]\n            else if result[1][0]?\n                callback result[1][0]\n            else if data.details? and data.pages?\n                callback null, data\n            else\n                callback new Error()\n\n            return\n        \n        return\n\n    fetchDetails: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}\"\n        , callback\n\n        return\n\n    fetchPages: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/pages\"\n        , callback\n\n        return\n\n    fetchHotspots: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/hotspots\"\n        , callback\n\n        return","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'\n","MicroEvent = require 'microevent'\n\nclass IncitoPublicationEventTracking\n    constructor: (@eventTracker, @id, {\n        @pagedPublicationId\n    }) ->\n        return\n\n    trackOpened: (properties) ->\n        return @ if not @eventTracker?\n\n        @eventTracker.trackIncitoPublicationOpened\n            'ip.id': @id\n            'pp.vt': @eventTracker.createViewToken(@pagedPublicationId) if @pagedPublicationId\n            'vt': @eventTracker.createViewToken(@id)\n\n        @\n\nMicroEvent.mixin IncitoPublicationEventTracking\n\nmodule.exports = IncitoPublicationEventTracking\n","Incito = require 'incito-browser'\nMicroEvent = require 'microevent'\nEventTracking = require './event-tracking'\n\nclass Viewer\n    @Incito: Incito\n\n    constructor: (@el, @options = {}) ->\n        @incito = new Incito @el,\n            incito: @options.incito\n            renderLaziness: @options.renderLaziness\n        @_eventTracking = new EventTracking @options.eventTracker, @options.id,\n            pagedPublicationId: @options.pagedPublicationId\n\n        return\n    \n    start: ->\n        @incito.start()\n\n        @el.classList.add 'sgn-incito--started'\n\n        @_eventTracking.trackOpened()\n\n        @\n    \n    destroy: ->\n        @incito.destroy()\n\n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","module.exports = class Controls\n    constructor: (@viewer) ->\n        @progressEl = @viewer.el.querySelector '.sgn-incito__progress'\n        @isScrolling = false\n\n        if @progressEl?\n            @progressEl.textContent = \"0 %\"\n\n            window.addEventListener 'scroll', @scroll, false\n\n            @viewer.bind 'destroyed', =>\n                window.removeEventListener 'scroll', @scroll, false\n\n                return\n\n        return\n    \n    scroll: =>\n        winHeight = window.innerHeight\n        rect = @viewer.el.getBoundingClientRect()\n        progress = Math.min 100, Math.round(Math.abs(rect.top - winHeight) / rect.height * 100)\n\n        clearTimeout @scrollTimeout\n        @scrollTimeout = setTimeout =>\n            @isScrolling = false\n\n            @viewer.el.classList.remove 'sgn-incito--scrolling'\n\n            return\n        , 1000\n\n        if @isScrolling is false\n            @viewer.el.classList.add 'sgn-incito--scrolling'\n\n            @isScrolling = true\n\n        @progressEl.textContent = \"#{progress} %\"\n        @viewer.trigger 'progress', progress: progress\n\n        return","util = require '../../util'\nSGN = require '../../core'\nControls = require './controls'\nclientLocalStorage = require '../../storage/client-local'\nschema = require '../../../graphql/incito.graphql'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        @deviceCategory = @getDeviceCategory()\n        @pixelRatio = @getPixelRatio()\n        @pointer = @getPointer()\n        @orientation = @getOrientation()\n        @time = @getTime()\n        @locale = @getLocale()\n        @maxWidth = @getMaxWidth()\n        @featureLabels = @getFeatureLabels()\n        @versionsSupported = ['1.0.0']\n        @storageKey = \"incito-#{@options.id}\"\n\n        return\n    \n    getDeviceCategory: ->\n        util.getDeviceCategory()\n    \n    getPixelRatio: ->\n        window.devicePixelRatio or 1\n    \n    getPointer: ->\n        util.getPointer()\n    \n    getOrientation: ->\n        orientation = util.getOrientation screen.width, screen.height\n        orientation = 'horizontal' if orientation is 'quadratic'\n\n        orientation\n    \n    getTime: ->\n        new Date().toISOString()\n    \n    getLocale: ->\n        localeChain = []\n        locale = null\n\n        if Array.isArray(navigator.languages) and navigator.languages.length > 0\n            localeChain = localeChain.concat navigator.languages\n        else if typeof navigator.language == 'string' and navigator.language.length > 0\n            localeChain.push navigator.language\n        else if typeof navigator.browserLanguage == 'string' and navigator.browserLanguage.length > 0\n            localeChain.push navigator.browserLanguage\n\n        localeChain.push 'en_US'\n\n        for prefLocale in localeChain\n            continue if not prefLocale?\n\n            prefLocale = prefLocale.replace '-', '_'\n\n            if /[a-z][a-z]_[A-Z][A-Z]/g.test prefLocale\n                locale = prefLocale\n                \n                break\n\n        locale\n    \n    getMaxWidth: ->\n        if Math.abs(window.orientation) is 90\n            Math.min @options.el.offsetWidth, screen.width\n        else\n            @options.el.offsetWidth\n    \n    getFeatureLabels: ->\n        featureLabels = clientLocalStorage.get 'incito-feature-labels'\n        featureLabels = [] if Array.isArray(featureLabels) is false\n\n        featureLabels\n    \n    anonymizeFeatureLabels: ->\n        count = @featureLabels.length\n        vector = @featureLabels.reduce (acc, cur) ->\n            if !acc[cur]\n                acc[cur] = {\n                    key: cur\n                    value: 0\n                }\n            \n            acc[cur].value++\n            \n            acc\n        , {}\n\n        Object.values(vector).map (featureLabel) ->\n            key: featureLabel.key\n            value: Math.round(featureLabel.value / count * 100) / 100\n\n    fetch: (callback) ->\n        data = SGN.storage.session.get @storageKey\n\n        if data? and data.response? and data.width is @maxWidth\n            return callback null, data.response\n\n        SGN.GraphKit.request\n            query: schema\n            operationName: 'GetIncitoPublication'\n            variables:\n                id: @options.id\n                deviceCategory: 'DEVICE_CATEGORY_' + @deviceCategory.toUpperCase()\n                pixelRatio: @pixelRatio\n                pointer: 'POINTER_' + @pointer.toUpperCase()\n                orientation: 'ORIENTATION_' + @orientation.toUpperCase()\n                time: @time\n                locale: @locale\n                maxWidth: @maxWidth\n                versionsSupported: @versionsSupported\n                featureLabels: @anonymizeFeatureLabels @featureLabels\n        , (err, res) =>\n            if err?\n                callback err\n            else if res.errors and res.errors.length > 0\n                callback util.error(new Error(), 'graph request contained errors')\n            else\n                callback null, res\n\n                SGN.storage.session.set @storageKey,\n                    width: @maxWidth\n                    response: res\n            \n            return\n\n        return\n    \n    createViewer: (data) ->\n        if not data.incito?\n            throw util.error new Error(), 'you need to supply valid Incito to create a viewer'\n\n        viewer = new SGN.IncitoPublicationKit.Viewer @options.el,\n            id: @options.id\n            pagedPublicationId: @options.pagedPublicationId\n            incito: data.incito\n            eventTracker: @options.eventTracker\n        controls = new Controls viewer\n        self = @\n\n        # Persist clicks on feature labels for later anonymization.\n        SGN.CoreUIKit.on viewer.el, 'click', '.incito__view[data-feature-labels]', ->\n            featureLabels = this.getAttribute('data-feature-labels').split ','\n\n            self.featureLabels = self.featureLabels.concat featureLabels\n\n            while self.featureLabels.length > 1000\n                self.featureLabels.shift()\n            \n            clientLocalStorage.set 'incito-feature-labels', self.featureLabels\n            \n            return\n\n        viewer\n","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\nvar _matcher,\n  _level = 0,\n  _id = 0,\n  _handlers = {},\n  _gatorInstances = {};\n\nfunction _addEvent(gator, type, callback) {\n  // blur and focus do not bubble up but if you use event capturing\n  // then you will get them\n  var useCapture = type == \"blur\" || type == \"focus\";\n  gator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\nfunction _getMatcher(element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n  // if it doesn't match a native browser method\n  // fall back to the gator function\n  _matcher = Gator.matchesSelector;\n  return _matcher;\n}\n\n/**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\nfunction _matchesSelector(element, selector, boundElement) {\n  // no selector means this event was bound directly to this element\n  if (selector == \"_root\") {\n    return boundElement;\n  }\n\n  // if we have moved up to the element you bound the event to\n  // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n  // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n  // if this element did not match but has a parent we should try\n  // going up the tree to see if any of the parent elements match\n  // for example if you are looking for a click on an <a> tag but there\n  // is a <span> inside of the a tag that it is the target,\n  // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler(gator, event, selector, callback) {\n  if (!_handlers[gator.id]) {\n    _handlers[gator.id] = {};\n  }\n\n  if (!_handlers[gator.id][event]) {\n    _handlers[gator.id][event] = {};\n  }\n\n  if (!_handlers[gator.id][event][selector]) {\n    _handlers[gator.id][event][selector] = [];\n  }\n\n  _handlers[gator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler(gator, event, selector, callback) {\n  // if there are no events tied to this element at all\n  // then don't do anything\n  if (!_handlers[gator.id]) {\n    return;\n  }\n\n  // if there is no event type specified then remove all events\n  // example: Gator(element).off()\n  if (!event) {\n    for (var type in _handlers[gator.id]) {\n      if (_handlers[gator.id].hasOwnProperty(type)) {\n        _handlers[gator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n  // if no callback or selector is specified remove all events of this type\n  // example: Gator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[gator.id][event] = {};\n    return;\n  }\n\n  // if a selector is specified but no callback remove all events\n  // for this selector\n  // example: Gator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[gator.id][event][selector];\n    return;\n  }\n\n  // if we have specified an event type, selector, and callback then we\n  // need to make sure there are callbacks tied to this selector to\n  // begin with.  if there aren't then we can stop here\n  if (!_handlers[gator.id][event][selector]) {\n    return;\n  }\n\n  // if there are then loop through all the callbacks and if we find\n  // one that matches remove it from the array\n  for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n    if (_handlers[gator.id][event][selector][i] === callback) {\n      _handlers[gator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent(id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  var target = e.target || e.srcElement,\n    selector,\n    match,\n    matches = {},\n    i = 0,\n    j = 0;\n\n  // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n      if (\n        match &&\n        Gator.matchesEvent(\n          type,\n          _gatorInstances[id].element,\n          match,\n          selector == \"_root\",\n          e\n        )\n      ) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n  // stopPropagation() fails to set cancelBubble to true in Webkit\n  // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function() {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          Gator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\n/**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\nfunction _bind(events, selector, callback, remove) {\n  // fail silently if you pass null or undefined as an alement\n  // in the Gator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof selector == \"function\") {\n    callback = selector;\n    selector = \"_root\";\n  }\n\n  var id = this.id,\n    i;\n\n  function _getGlobalCallback(type) {\n    return function(e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    if (remove) {\n      _removeHandler(this, events[i], selector, callback);\n      continue;\n    }\n\n    if (!_handlers[id] || !_handlers[id][events[i]]) {\n      Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n    }\n\n    _addHandler(this, events[i], selector, callback);\n  }\n\n  return this;\n}\n\n/**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\nfunction Gator(element, id) {\n  // called as function\n  if (!(this instanceof Gator)) {\n    // only keep one Gator instance per node to make sure that\n    // we don't create a ton of new objects if you want to delegate\n    // multiple events from the same node\n    //\n    // for example: Gator(document).on(...\n    for (var key in _gatorInstances) {\n      if (_gatorInstances[key].element === element) {\n        return _gatorInstances[key];\n      }\n    }\n\n    _id++;\n    _gatorInstances[_id] = new Gator(element, _id);\n\n    return _gatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.on = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.off = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nGator.matchesSelector = function() {};\nGator.cancel = _cancel;\nGator.addEvent = _addEvent;\nGator.matchesEvent = function() {\n  return true;\n};\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Gator;\n}\n\nif (typeof window !== \"undefined\" && window.exports) {\n  window.Gator = Gator;\n}\n","module.exports = class OfferDetails\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n\n        @el.className = 'sgn-offer-details'\n        @el.setAttribute 'tabindex', -1\n        @el.appendChild @options.contentEl\n\n        @position()\n\n        return\n    \n    appendTo: (el) ->\n        el.appendChild @el\n\n        @el.offsetWidth\n\n        @show()\n\n        @\n    \n    show: ->\n        @el.className += ' in'\n\n        window.addEventListener 'resize', @resize, false\n\n        @\n    \n    destroy: ->\n        window.removeEventListener 'resize', @resize, false\n\n        @el.parentNode.removeChild @el\n\n        return\n    \n    position: ->\n        rect = @options.anchorEl.getBoundingClientRect()\n        top = window.pageYOffset + rect.top + @options.anchorEl.offsetHeight\n        left = window.pageXOffset + rect.left\n        width = @options.anchorEl.offsetWidth\n\n        @el.style.top = top + 'px'\n        @el.style.left = left + 'px'\n        @el.style.width = width + 'px'\n\n        return\n    \n    resize: =>\n        @position()\n\n        return","MicroEvent = require 'microevent'\nGator = require '../../../../vendor/gator'\nMustache = require 'mustache'\nkeyCodes = require '../../key-codes'\n\ntemplate = \"\"\"\n<div class=\"sgn-popover__background\" data-close></div>\n<div class=\"sgn-popover__menu\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index=\"{{index}}\">\n                    <p class=\"sgn-popover-item__title\">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class=\"sgn-popover-item__subtitle\">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>\n\"\"\"\n\nclass Popover\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n        @backgroundEl = document.createElement 'div'\n\n        return\n\n    render: ->\n        width = @options.width ? 100\n        header = @options.header\n        template = @options.template if @options.template?\n        view =\n            header: header\n            singleChoiceItems: @options.singleChoiceItems?.map (item, i) ->\n                item: item\n                index: i\n\n        @el.className = 'sgn-popover'\n        @el.setAttribute 'tabindex', -1\n        @el.innerHTML = Mustache.render template, view\n\n        @position()\n        @addEventListeners()\n\n        @\n\n    destroy: ->\n        Gator(@el).off()\n\n        window.removeEventListener 'resize', @resize, false\n        window.removeEventListener 'scroll', @scroll, false\n\n        if @el.parentNode?\n            @el.parentNode.removeChild @el\n\n            @trigger 'destroyed'\n\n        return\n    \n    position: ->\n        top = @options.y\n        left = @options.x\n\n        menuEl = @el.querySelector '.sgn-popover__menu'\n\n        width = menuEl.offsetWidth\n        height = menuEl.offsetHeight\n        parentWidth = @el.parentNode.offsetWidth\n        parentHeight = @el.parentNode.offsetHeight\n        boundingRect = @el.parentNode.getBoundingClientRect()\n\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        top -= window.pageYOffset\n        left -= window.pageXOffset\n\n        if top + height > parentHeight\n            menuEl.style.top = parentHeight - height + 'px'\n        else\n            menuEl.style.top = top + 'px'\n\n        if left + width > parentWidth\n            menuEl.style.left = parentWidth - width + 'px'\n        else\n            menuEl.style.left = left + 'px'\n        \n        return\n    \n    addEventListeners: ->\n        trigger = @trigger.bind @\n\n        @el.addEventListener 'keyup', @keyUp\n\n        Gator(@el).on 'click', '[data-index]', (e) ->\n            e.preventDefault()\n            e.stopPropagation()\n\n            trigger 'selected', index: +@getAttribute 'data-index'\n\n            return\n\n        Gator(@el).on 'click', '[data-close]', (e) =>\n            e.preventDefault()\n            e.stopPropagation()\n            \n            @destroy()\n\n            return\n\n        Gator(@el).on 'click', '.sgn-popover__menu', (e) ->\n            e.stopPropagation()\n\n            return\n\n        window.addEventListener 'resize', @resize, false\n        window.addEventListener 'scroll', @scroll, false\n\n        return\n\n    keyUp: (e) =>\n        @destroy() if e.keyCode is keyCodes.ESC\n        \n        return\n\n    resize: =>\n        @destroy()\n\n        return\n\n    scroll: =>\n        @destroy()\n\n        return\n\nMicroEvent.mixin Popover\n\nmodule.exports = Popover\n","Popover = require './popover'\n\nmodule.exports = (ctx, callback) ->\n    items = ctx.items\n    popover = null\n\n    if items.length is 1\n        callback items[0]\n    else if items.length > 1\n        popover = new Popover\n            header: ctx.header,\n            x: ctx.x\n            y: ctx.y\n            singleChoiceItems: items\n\n        popover.bind 'selected', (e) ->\n            callback items[e.index]\n\n            popover.destroy()\n\n            return\n\n        popover.bind 'destroyed', ->\n            ctx.el.focus()\n\n            return\n\n        ctx.el.appendChild popover.el\n        popover.render().el.focus()\n\n    destroy: ->\n        popover.destroy() if popover?\n\n        return","Gator = require '../../../../vendor/gator'\n\nmodule.exports =\n    OfferDetails: require './offer-details'\n\n    Popover: require './popover'\n\n    singleChoicePopover: require './single-choice-popover'\n\n    on: (el, events, selector, callback) ->\n        Gator(el).on events, selector, callback\n\n    off: (el, events, selector, callback) ->\n        Gator(el).off events, selector, callback","{isBrowser} = require './util'\n\nSGN = require './core'\n\n# Expose storage backends.\nSGN.storage =\n    local: require './storage/client-local'\n    session: require './storage/client-session'\n    cookie: require './storage/client-cookie'\n\n# Expose the different kits.\nSGN.AssetsKit = require './kits/assets'\nSGN.EventsKit = require './kits/events'\nSGN.GraphKit = require './kits/graph'\nSGN.CoreKit = require './kits/core'\nSGN.PagedPublicationKit = require './kits/paged-publication'\nSGN.IncitoPublicationKit = require './kits/incito-publication'\nSGN.CoreUIKit = require './kits/core-ui'\n\n# Set the core session from the cookie store if possible.\nsession = SGN.storage.cookie.get 'session'\n\nif typeof session is 'object'\n    SGN.config.set\n        coreSessionToken: session.token\n        coreSessionClientId: session.client_id\n\nSGN.client = do ->\n    id = SGN.storage.local.get 'client-id'\n    id = id.data if id?.data\n\n    if not id?\n        id = SGN.util.uuid()\n        \n        SGN.storage.local.set 'client-id', id\n\n    id: id\n\n# Listen for changes in the config.\nSGN.config.bind 'change', (changedAttributes) ->\n    eventTracker = changedAttributes.eventTracker\n\n    if eventTracker?\n        eventTracker.trackClientSessionOpened()\n\n    return\n\nif isBrowser()\n    # Autoconfigure the SDK.\n    scriptEl = document.getElementById 'sgn-sdk'\n\n    if scriptEl?\n        appKey = scriptEl.getAttribute 'data-app-key'\n        trackId = scriptEl.getAttribute 'data-track-id'\n        config = {}\n\n        config.appKey = appKey if appKey?\n        config.eventTracker = new SGN.EventsKit.Tracker(trackId: trackId) if trackId?\n\n        SGN.config.set config\n\nmodule.exports = SGN\n"],"names":["util","isBrowser","window","document","isNode","process","error","err","options","key","value","message","code","name","stack","time","Date","uuid","replace","c","r","v","Math","random","toString","getQueryParam","field","url","href","reg","string","location","RegExp","exec","getRandomNumberBetween","from","to","floor","getOS","ua","navigator","userAgent","indexOf","getDeviceCategory","deviceCategory","platform","test","getPointer","pointer","matchMedia","matches","getOrientation","width","height","getScreenDimensions","density","logical","physical","ref","screen","round","getUtcOffsetSeconds","jan1","jan2","now","stdTimeOffset","tmp","getFullYear","toGMTString","substring","lastIndexOf","getUtcDstOffsetSeconds","getTimezoneOffset","getColorBrightness","color","hex","rgb","s","sum","x","parseInt","btoa","str","buffer","Buffer","chunk","arr","size","results","length","push","splice","throttle","fn","threshold","scope","deferTimer","last","args","context","getTime","arguments","clearTimeout","setTimeout","apply","loadImage","src","callback","img","Image","onload","onerror","Error","distance","lat1","lng1","lat2","lng2","dist","radlat1","radlat2","radtheta","theta","PI","sin","cos","acos","async","parallel","asyncCalls","sharedCallback","allResults","counter","k","makeCallback","index","i","promiseCallbackInterop","fun","cbParameterIndex","makePromise","parameters","Promise","resolve","reject","callParameters","j","neoCallback","result","Config","MicroEvent","require$$0","attrs","config","changedAttributes","keys","trigger","option","mixin","Mustache","pairs","t","view","template","render","update","translations","require$$1","require$$2","set","locale","coreUrl","graphUrl","eventsTrackUrl","eventsPulseUrl","assetsFileUploadUrl","SGN","prefixKey","storage","localStorage","get","JSON","parse","stringify","sessionStorage","ca","ct","len","cookie","split","trim","date","days","setTime","toUTCString","progressCallback","formData","http","timeout","FormData","XMLHttpRequest","append","file","status","response","statusCode","data","upload","onprogress","e","lengthComputable","progress","loaded","total","open","setRequestHeader","send","fileUpload","Tracker","_dispatch","clientLocalStorage","dispatch","dispatchLimit","dispatching","fetch","getPool","md5","pool","ship","require$$3","Array","isArray","filter","evt","_i","geohash","country","type","properties","version","trackId","Object","assign","poolLimit","shift","hasOwnProperty","trackEvent","viewToken","parts","client","id","concat","join","String","fromCharCode","asBytes","slice","defaultOptions","events","req","method","headers","body","then","json","nacks","forEach","resEvent","poolEvent","catch","addEventListener","Pulse","onOpen","onMessage","onClose","destroyed","connection","connect","close","WebSocket","onopen","onmessage","onError","onclose","parseCookies","request","cookies","parsedCookies","map","keyValuePair","appKey","authToken","authTokenCookieName","query","operationName","variables","credentials","authCookie","secondTime","CoreKit","session","ensure","appSecret","appVersion","geo","qs","ref1","ref2","token","geolocation","sign","r_locale","api_av","r_lat","latitude","r_lng","longitude","r_radius","radius","r_sensor","sensor","val","encodeURIComponent","ref3","responseToken","saveToken","coreSessionToken","callbackQueue","clientCookieStorage","renewed","sha256","ttl","saveCookie","saveClientId","clientId","coreSessionClientId","client_id","create","renew","complete","queueCount","PagedPublicationPageSpread","contentsRendered","hotspotsRendered","el","renderEl","pages","pageIds","createElement","getPages","page","className","setAttribute","getId","maxZoomScale","imageLoads","pageCount","getEl","image","loaderEl","pageEl","images","medium","appendChild","innerHTML","label","isComplete","style","backgroundImage","pageSpreadId","pageSpread","versoPageSpread","pageEls","call","querySelectorAll","getAttribute","find","large","removeAttribute","PageSpread","PagedPublicationPageSpreads","collection","ids","frag","createDocumentFragment","pageMode","firstPage","lastPage","midstPageSpreads","pageSpreads","pop","midstPages","bind","PageSpreads","PagedPublicationCore","Verso","require$$4","beforeNavigation","afterNavigation","attemptedNavigation","clicked","doubleClicked","pressed","contextmenu","panStart","panEnd","zoomedIn","zoomedOut","resize","unload","makeOptions","defaults","pageId","getOption","els","root","querySelector","verso","getPageMode","pageLoaded","pagesLoaded","setColor","parentNode","insertBefore","getFrag","createVerso","start","destroy","getVerso","overridePageSpreadContentRect","resizeListener","focus","pageSpreadEl","pageSpreadEls","backgroundColor","removeChild","removeEventListener","opts","actualHeight","actualWidth","clientRect","imageRatio","pageHeight","pageWidth","rect","scale","top","left","right","bottom","getPageEls","transform","offsetWidth","offsetHeight","min","getBoundingClientRect","pageLabels","match","visibility","getVisibility","renderContents","clearContents","newSpreadEl","pageSpreadCount","position","progressLabel","theVerso","newPosition","getPageSpreadFromPosition","getPageSpreadCount","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","newPositionIsEnd","isInsideContent","findPage","zoomIn","zoomOut","idleTimeout","getPosition","getPageIds","refresh","navigateTo","getPageSpreadPositionFromPageId","duration","getType","getContentRect","switchPageMode","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","cache","hotspotsReceived","resized","boundingRect","contentRect","hotspot","hotspotEl","hotspotEls","ratio","renderHotspot","maxX","maxY","minX","minY","pageNumber","pageNumbers","locations","coords","y","setCache","renderHotspots","requestHotspots","getCache","ESC","ARROW_RIGHT","ARROW_LEFT","SPACE","NUMBER_ONE","PagedPublicationControls","keyCodes","prevClicked","nextClicked","closeClicked","keyDown","progressBar","prevControl","nextControl","keyDownHandler","keyboard","showProgress","visibilityClassName","classList","remove","add","textContent","preventDefault","keyCode","PagedPublicationEventTracking","eventTracker","hidden","appeared","disappeared","pageSpreadDisappeared","trackPagedPublicationOpened","createViewToken","trackPagedPublicationPageDisappeared","pageSpreadAppeared","trackPageSpreadDisappeared","Controls","Core","EventTracking","Hotspots","Viewer","require$$5","_core","_hotspots","_controls","_eventTracking","viewSession","hotspots","hotspotQueue","popover","_setupEventListeners","trackOpened","navigateToIndex","first","prev","next","hotspotsRequested","overlayEls","overlayEl","CoreUIKit","singleChoicePopover","header","items","title","offer","heading","subtitle","pricing","currency","price","hotspotRequest","hotspotRatio","processHotspotQueue","pickHotspot","Bootstrapper","fetchDetails","fetchPages","fetchHotspots","viewerOptions","PagedPublicationKit","ownedBy","details","dealer_id","branding","pageflip","dimensions","transformPages","zoom","viewer","obj","applyHotspots","IncitoPublicationEventTracking","pagedPublicationId","trackIncitoPublicationOpened","Incito","incito","renderLaziness","scroll","progressEl","isScrolling","winHeight","innerHeight","abs","scrollTimeout","schema","pixelRatio","getPixelRatio","orientation","getLocale","maxWidth","getMaxWidth","featureLabels","getFeatureLabels","versionsSupported","storageKey","devicePixelRatio","toISOString","localeChain","prefLocale","languages","language","browserLanguage","count","vector","reduce","acc","cur","values","featureLabel","GraphKit","toUpperCase","anonymizeFeatureLabels","res","errors","controls","self","IncitoPublicationKit","on","_matcher","_level","_id","_handlers","_gatorInstances","_addEvent","gator","useCapture","element","_cancel","stopPropagation","_getMatcher","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Gator","matchesSelector","_matchesSelector","selector","boundElement","_addHandler","event","_removeHandler","_handleEvent","target","srcElement","matchesEvent","cancelBubble","cancel","_bind","_getGlobalCallback","addEvent","prototype","off","module","exports","OfferDetails","contentEl","show","anchorEl","pageYOffset","pageXOffset","Popover","keyUp","backgroundEl","singleChoiceItems","item","addEventListeners","menuEl","parentHeight","parentWidth","ctx","scriptEl","local","AssetsKit","EventsKit","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","trackClientSessionOpened","getElementById"],"mappings":"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"}